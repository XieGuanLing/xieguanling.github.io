
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- common.css -->
      <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: -apple-system, Helvetica, Arial, sans-serif;margin: 0;padding: 20px;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 90%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
      <!-- ace-static.css -->
      <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter > .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
      <style>.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}</style>
      <!-- export.css -->
      <style>
        body{margin:0 auto;max-width:800px;line-height:1.4}
        #nav{margin:5px 0 10px;font-size:15px}
        #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
        #contentarea{font-size:15px;margin:16px 0}
        .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
        .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
        .latex-cell{white-space:pre-wrap;}
      </style>
      <!-- User CSS -->
      <style> .text-cell {font-size: 15px;}.code-cell {font-size: 12px;}.markdown-cell {font-size: 15px;}.latex-cell {font-size: 15px;}</style>
    </head>
    <body>
      <div id="nav"><div>Next: <a href='docker 4. registry.html'>docker 4. registry</a>, Previous: <a href='docker 2.容器.html'>docker 2.容器</a>, Up: <a href='index.html'>Index</a></div></div>
      <div id="titlearea">
        <h2>docker 3.镜像、Dockerfile</h2>
      </div>
      <div id="contentarea"><div class="cell text-cell"><h3><b>什么是镜像？</b></h3><div><p>&nbsp; &nbsp; 我们都知道，操作系统分为内核和用户空间。对于 Linux 而言，内核启动后，会挂载 <code>root</code> 文件系统为其提供用户空间支持。而 Docker 镜像（Image），就相当于是一个 <code>root</code> 文件系统。比如官方镜像 <code>ubuntu:17.10</code> 就包含了完整的一套 Ubuntu 17.10 最小系统的 <code>root</code> 文件系统。</p>
<p>&nbsp; &nbsp; Docker 镜像是一个特殊的文件系统，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像不包含任何动态数据，其内容在构建之后也不会被改变。</p><h3 id="分层存储">分层存储</h3><p>因为镜像包含操作系统完整的 <code>root</code> 文件系统，其体积往往是庞大的，因此在 Docker 设计时，就充分利用 <a href="https://en.wikipedia.org/wiki/Union_mount" target="_blank">Union FS</a> 的技术，将其设计为分层存储的架构。所以严格来说，镜像并非是像一个 ISO 那样的打包文件，镜像只是一个虚拟的概念，其实际体现并非由一个文件组成，而是由一组文件系统组成，或者说，由多层文件系统联合组成。</p><p>镜像构建时，会一层层构建，前一层是后一层的基础。每一层构建完就不会再发生改变，后一层上的任何改变只发生在自己这一层。比如，删除前一层文件的操作，实际不是真的删除前一层的文件，而是仅在当前层标记为该文件已删除。在最终容器运行的时候，虽然不会看到这个文件，但是实际上该文件会一直跟随镜像。因此，在构建镜像的时候，需要额外小心，每一层尽量只包含该层需要添加的东西，任何额外的东西应该在该层构建结束前清理掉。</p><p>


</p><p>分层存储的特征还使得镜像的复用、定制变的更为容易。甚至可以用之前构建好的镜像作为基础层，然后进一步添加新的层，以定制自己所需的内容，构建新的镜像。</p><hr></div></div><div class="cell text-cell"><h3><b>镜像常用相关操作命令：</b></h3><div><div>&nbsp; <b>build</b> &nbsp; &nbsp; &nbsp; 构建镜像(docker build -t xxx:tag -- file path)</div><div><br></div><div>&nbsp; <b>history</b> &nbsp; &nbsp;历史构建过程(docker history xxx )</div><div><br></div><div>&nbsp; <b>images</b> &nbsp; &nbsp;查看所有镜像(docker images)</div><div><br></div><div>&nbsp; <b>import</b> &nbsp; &nbsp; 导入从export导出的容器作为镜像(docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]])</div><div><br></div><div>&nbsp; <b>load</b> &nbsp; &nbsp; &nbsp; &nbsp;从stdin或者压缩文件中加载镜像(docker load -i filename)</div><div><br></div><div>&nbsp; <b>pull</b> &nbsp; &nbsp; &nbsp; &nbsp; pull镜像(docker pull&nbsp;&nbsp;[REPOSITORY[:TAG]])</div><div><br></div><div>&nbsp; <b>push</b> &nbsp; &nbsp; &nbsp; push镜像(docker push&nbsp;&nbsp;[REPOSITORY[:TAG]])</div><div><br></div><div>&nbsp; <b>rmi</b> &nbsp; &nbsp; &nbsp; &nbsp; 删除镜像（前提是镜像未被容器引用）(docker rmi xxx)</div><div><br></div><div>&nbsp; <b>save</b> &nbsp; &nbsp; &nbsp; 导出镜像到压缩文件(docker save xxx1 xxx2 xxx3 -o name)</div><div><br></div><div>&nbsp; <b>search</b> &nbsp; 在docker hub搜索镜像(docker search xxx)</div><div><br></div><div>&nbsp; <b>tag</b> &nbsp; &nbsp; &nbsp; &nbsp; 镜像打版本号(docker tag xxx &nbsp;[REPOSITORY[:TAG]])</div></div><div><br></div><div><hr></div></div><div class="cell text-cell"><h3>Dockerfile</h3><div>Dockerfile 是一个文本文件，其内包含了一条条的<strong>指令(Instruction)</strong>，每一条指令构建一层，因此每一条指令的内容，就是描述该层应当如何构建。</div><div><br></div><div><h3>Dockerfile 常用相关命令</h3></div><div><b>COPY</b> &nbsp;复制文件</div><div><br></div><div><b>ADD</b> &nbsp; &nbsp;更高级的复制文件（可以是url下载的文件，自动解压）</div><div><br></div><div><b>RUN</b> &nbsp; &nbsp;执行命令</div><div><br></div><div><b>ENV</b> &nbsp; &nbsp;指定run的环境变量</div><div><br></div><div><b>ARG</b> &nbsp; &nbsp;构建参数<br></div><div><br></div><div><b>EXPOSE</b> &nbsp;暴露端口</div><div><br></div><div><b>WORKDIR</b> &nbsp;指定工作目录</div><div><br></div><div><b>USER</b> &nbsp;创建指定用户</div><div><br></div><div><b>ENTRYPOINT</b> &nbsp;入口点（容器第一次启动才会调用）</div><div><br></div><div><b>CMD</b> &nbsp;容器启动命令（run时可以覆盖）</div><div><br></div><div><h3>Dockerfile 构建一个镜像</h3></div><div>（构建镜像需要用FROM指定镜像源，就像类的继承，需要指定superclass）</div><div><br></div><div><b><i>通过dev_env这个仓库的cas镜像讲解：ssh://git@192.168.1.251:7999/dok/dev_env.git</i></b></div></div><div class="cell text-cell"><b><u>官方mysql 5.6的Dockerfile：</u></b><a href="https://github.com/docker-library/mysql/blob/883703dfb30d9c197e0059a669c4bb64d55f6e0d/5.6/Dockerfile">https://github.com/docker-library/mysql/blob/883703dfb30d9c197e0059a669c4bb64d55f6e0d/5.6/Dockerfile</a></div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">FROM</span> <span class="ace_identifier">debian</span>:<span class="ace_identifier">jessie</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment"># add our user and group first to make sure their IDs get assigned consistently, regardless of whatever dependencies get added</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">RUN</span> <span class="ace_identifier">groupadd</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">r</span> <span class="ace_identifier">mysql</span> <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">useradd</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">r</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">g</span> <span class="ace_identifier">mysql</span> <span class="ace_identifier">mysql</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment"># add gosu for easy step-down from root</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">ENV</span> <span class="ace_identifier">GOSU_VERSION</span> <span class="ace_constant ace_numeric">1.7</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">RUN</span> <span class="ace_support ace_function ace_builtin">set</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">x</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">get</span> <span class="ace_identifier">update</span> <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">get</span> <span class="ace_identifier">install</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">y</span> <span class="ace_keyword ace_operator">--</span><span class="ace_identifier">no</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">install</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">recommends</span> <span class="ace_identifier">ca</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">certificates</span> <span class="ace_identifier">wget</span> <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">rm</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">rf</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">lib</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">lists</span><span class="ace_keyword ace_operator">/*</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">wget</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">O</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">usr</span><span class="ace_keyword ace_operator">/</span><span class="ace_keyword">local</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">bin</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">gosu</span> <span class="ace_string">"https://github.com/tianon/gosu/releases/download/</span><span class="ace_variable">$GOSU_VERSION</span><span class="ace_string">/gosu-</span><span class="ace_variable">$</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">dpkg</span> <span class="ace_keyword ace_operator">--</span><span class="ace_identifier">print</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">architecture</span><span class="ace_paren ace_rparen">)</span><span class="ace_string">"</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">wget</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">O</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">usr</span><span class="ace_keyword ace_operator">/</span><span class="ace_keyword">local</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">bin</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">gosu</span>.<span class="ace_identifier">asc</span> <span class="ace_string">"https://github.com/tianon/gosu/releases/download/</span><span class="ace_variable">$GOSU_VERSION</span><span class="ace_string">/gosu-</span><span class="ace_variable">$</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">dpkg</span> <span class="ace_keyword ace_operator">--</span><span class="ace_identifier">print</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">architecture</span><span class="ace_paren ace_rparen">)</span><span class="ace_string">.asc"</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_keyword">export</span> <span class="ace_variable">GNUPGHOME=</span><span class="ace_string">"</span><span class="ace_variable">$</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">mktemp</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">d</span><span class="ace_paren ace_rparen">)</span><span class="ace_string">"</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">gpg</span> <span class="ace_keyword ace_operator">--</span><span class="ace_identifier">keyserver</span> <span class="ace_identifier">ha</span>.<span class="ace_identifier">pool</span>.<span class="ace_identifier">sks</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">keyservers</span>.<span class="ace_identifier">net</span> <span class="ace_keyword ace_operator">--</span><span class="ace_identifier">recv</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">keys</span> <span class="ace_identifier">B42F6819007F00F88E364FD4036A9C25BF357DD4</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">gpg</span> <span class="ace_keyword ace_operator">--</span><span class="ace_identifier">batch</span> <span class="ace_keyword ace_operator">--</span><span class="ace_identifier">verify</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">usr</span><span class="ace_keyword ace_operator">/</span><span class="ace_keyword">local</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">bin</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">gosu</span>.<span class="ace_identifier">asc</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">usr</span><span class="ace_keyword ace_operator">/</span><span class="ace_keyword">local</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">bin</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">gosu</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">rm</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">r</span> <span class="ace_string">"</span><span class="ace_variable">$GNUPGHOME</span><span class="ace_string">"</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">usr</span><span class="ace_keyword ace_operator">/</span><span class="ace_keyword">local</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">bin</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">gosu</span>.<span class="ace_identifier">asc</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">chmod</span> <span class="ace_keyword ace_operator">+</span><span class="ace_identifier">x</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">usr</span><span class="ace_keyword ace_operator">/</span><span class="ace_keyword">local</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">bin</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">gosu</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">gosu</span> <span class="ace_identifier">nobody</span> <span class="ace_identifier">true</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">get</span> <span class="ace_identifier">purge</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">y</span> <span class="ace_keyword ace_operator">--</span><span class="ace_identifier">auto</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">remove</span> <span class="ace_identifier">ca</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">certificates</span> <span class="ace_identifier">wget</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">RUN</span> <span class="ace_identifier">mkdir</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">docker</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">entrypoint</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">initdb</span>.<span class="ace_identifier">d</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment"># FATAL ERROR: please install the following Perl modules before executing /usr/local/mysql/scripts/mysql_install_db:</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment"># File::Basename</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment"># File::Copy</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment"># Sys::Hostname</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment"># Data::Dumper</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">RUN</span> <span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">get</span> <span class="ace_identifier">update</span> <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">get</span> <span class="ace_identifier">install</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">y</span> <span class="ace_identifier">perl</span> <span class="ace_identifier">pwgen</span> <span class="ace_keyword ace_operator">--</span><span class="ace_identifier">no</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">install</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">recommends</span> <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">rm</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">rf</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">lib</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">lists</span><span class="ace_keyword ace_operator">/*</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">RUN</span> <span class="ace_support ace_function ace_builtin">set</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">ex</span><span class="ace_punctuation ace_operator">;</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_comment"># gpg: key 5072E1F5: public key "MySQL Release Engineering " imported</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_variable">key=</span><span class="ace_string ace_start">'</span><span class="ace_string">A4A9406876FCBD3C456770C88C718D3B5072E1F5</span><span class="ace_string ace_end">'</span><span class="ace_punctuation ace_operator">;</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_keyword">export</span> <span class="ace_variable">GNUPGHOME=</span><span class="ace_string">"</span><span class="ace_variable">$</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">mktemp</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">d</span><span class="ace_paren ace_rparen">)</span><span class="ace_string">"</span><span class="ace_punctuation ace_operator">;</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_identifier">gpg</span> <span class="ace_keyword ace_operator">--</span><span class="ace_identifier">keyserver</span> <span class="ace_identifier">ha</span>.<span class="ace_identifier">pool</span>.<span class="ace_identifier">sks</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">keyservers</span>.<span class="ace_identifier">net</span> <span class="ace_keyword ace_operator">--</span><span class="ace_identifier">recv</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">keys</span> <span class="ace_string">"</span><span class="ace_variable">$key</span><span class="ace_string">"</span><span class="ace_punctuation ace_operator">;</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_identifier">gpg</span> <span class="ace_keyword ace_operator">--</span><span class="ace_keyword">export</span> <span class="ace_string">"</span><span class="ace_variable">$key</span><span class="ace_string">"</span> <span class="ace_keyword ace_operator">&gt;</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">etc</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">trusted</span>.<span class="ace_identifier">gpg</span>.<span class="ace_identifier">d</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">mysql</span>.<span class="ace_identifier">gpg</span><span class="ace_punctuation ace_operator">;</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_identifier">rm</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">r</span> <span class="ace_string">"</span><span class="ace_variable">$GNUPGHOME</span><span class="ace_string">"</span><span class="ace_punctuation ace_operator">;</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  <span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">key</span> <span class="ace_identifier">list</span> <span class="ace_keyword ace_operator">&gt;</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">dev</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">null</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>  
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">ENV</span> <span class="ace_identifier">MYSQL_MAJOR</span> <span class="ace_constant ace_numeric">5.6</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">ENV</span> <span class="ace_identifier">MYSQL_VERSION</span> <span class="ace_constant ace_numeric">5.6.38</span><span class="ace_keyword ace_operator">-</span><span class="ace_constant ace_numeric">1</span><span class="ace_identifier">debian8</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">RUN</span> <span class="ace_support ace_function ace_builtin">echo</span> <span class="ace_string">"deb http://repo.mysql.com/apt/debian/ jessie mysql-</span><span class="ace_variable">$</span><span class="ace_paren ace_lparen">{</span><span class="ace_variable">MYSQL_MAJOR</span><span class="ace_paren ace_rparen">}</span><span class="ace_string">"</span> <span class="ace_keyword ace_operator">&gt;</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">etc</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">sources</span>.<span class="ace_identifier">list</span>.<span class="ace_identifier">d</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">mysql</span>.<span class="ace_identifier">list</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment"># the "/var/lib/mysql" stuff here is because the mysql-server postinst doesn't have an explicit way to disable the mysql_install_db codepath besides having a database already "configured" (ie, stuff in /var/lib/mysql/mysql)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment"># also, we set debconf keys to make APT a little quieter</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">RUN</span> <span class="ace_paren ace_lparen">{</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_support ace_function ace_builtin">echo</span> <span class="ace_identifier">mysql</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">community</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">server</span> <span class="ace_identifier">mysql</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">community</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">server</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">data</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">dir</span> <span class="ace_keyword">select</span> <span class="ace_string ace_start">'</span><span class="ace_string ace_end">'</span><span class="ace_punctuation ace_operator">;</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_support ace_function ace_builtin">echo</span> <span class="ace_identifier">mysql</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">community</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">server</span> <span class="ace_identifier">mysql</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">community</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">server</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">root</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">pass</span> <span class="ace_identifier">password</span> <span class="ace_string ace_start">'</span><span class="ace_string ace_end">'</span><span class="ace_punctuation ace_operator">;</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_support ace_function ace_builtin">echo</span> <span class="ace_identifier">mysql</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">community</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">server</span> <span class="ace_identifier">mysql</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">community</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">server</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">re</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">root</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">pass</span> <span class="ace_identifier">password</span> <span class="ace_string ace_start">'</span><span class="ace_string ace_end">'</span><span class="ace_punctuation ace_operator">;</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_support ace_function ace_builtin">echo</span> <span class="ace_identifier">mysql</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">community</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">server</span> <span class="ace_identifier">mysql</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">community</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">server</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">remove</span><span class="ace_keyword ace_operator">-</span><span class="ace_support ace_function ace_builtin">test</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">db</span> <span class="ace_keyword">select</span> <span class="ace_identifier">false</span><span class="ace_punctuation ace_operator">;</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_paren ace_rparen">}</span> <span class="ace_keyword ace_operator">|</span> <span class="ace_identifier">debconf</span><span class="ace_keyword ace_operator">-</span><span class="ace_support ace_function ace_builtin">set</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">selections</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">get</span> <span class="ace_identifier">update</span> <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">get</span> <span class="ace_identifier">install</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">y</span> <span class="ace_identifier">mysql</span><span class="ace_keyword ace_operator">-</span><span class="ace_variable">server=</span><span class="ace_string">"</span><span class="ace_variable">$</span><span class="ace_paren ace_lparen">{</span><span class="ace_variable">MYSQL_VERSION</span><span class="ace_paren ace_rparen">}</span><span class="ace_string">"</span> <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">rm</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">rf</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">lib</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">apt</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">lists</span><span class="ace_keyword ace_operator">/*</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">rm</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">rf</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">lib</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">mysql</span> <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">mkdir</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">p</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">lib</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">mysql</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">run</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">mysqld</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">chown</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">R</span> <span class="ace_identifier">mysql</span>:<span class="ace_identifier">mysql</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">lib</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">mysql</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">run</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">mysqld</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment"># ensure that /var/run/mysqld (used for socket and lock files) is writable regardless of the UID our mysqld instance ends up having at runtime</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">chmod</span> <span class="ace_constant ace_numeric">777</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">run</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">mysqld</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment"># comment out a few problematic configuration values</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_identifier">find</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">etc</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">mysql</span><span class="ace_keyword ace_operator">/</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">name</span> <span class="ace_string ace_start">'</span><span class="ace_string">*.cnf</span><span class="ace_string ace_end">'</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">print0</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">|</span> <span class="ace_identifier">xargs</span> <span class="ace_keyword ace_operator">-</span><span class="ace_constant ace_numeric">0</span> <span class="ace_identifier">grep</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">lZE</span> <span class="ace_string ace_start">'</span><span class="ace_string">^(bind-address|log)</span><span class="ace_string ace_end">'</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">|</span> <span class="ace_identifier">xargs</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">rt</span> <span class="ace_keyword ace_operator">-</span><span class="ace_constant ace_numeric">0</span> <span class="ace_identifier">sed</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">Ei</span> <span class="ace_string ace_start">'</span><span class="ace_string">s/^(bind-address|log)/#&amp;/</span><span class="ace_string ace_end">'</span> \
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment"># don't reverse lookup hostnames, they are usually another container</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword ace_operator">&amp;&amp;</span> <span class="ace_support ace_function ace_builtin">echo</span> <span class="ace_string ace_start">'</span><span class="ace_string">[mysqld]\nskip-host-cache\nskip-name-resolve</span><span class="ace_string ace_end">'</span> <span class="ace_keyword ace_operator">&gt;</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">etc</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">mysql</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">conf</span>.<span class="ace_identifier">d</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">docker</span>.<span class="ace_identifier">cnf</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">VOLUME</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">var</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">lib</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">mysql</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">COPY</span> <span class="ace_identifier">docker</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">entrypoint</span>.<span class="ace_identifier">sh</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">usr</span><span class="ace_keyword ace_operator">/</span><span class="ace_keyword">local</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">bin</span><span class="ace_keyword ace_operator">/</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">RUN</span> <span class="ace_identifier">ln</span> <span class="ace_keyword ace_operator">-</span><span class="ace_identifier">s</span> <span class="ace_identifier">usr</span><span class="ace_keyword ace_operator">/</span><span class="ace_keyword">local</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">bin</span><span class="ace_keyword ace_operator">/</span><span class="ace_identifier">docker</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">entrypoint</span>.<span class="ace_identifier">sh</span> <span class="ace_keyword ace_operator">/</span><span class="ace_identifier">entrypoint</span>.<span class="ace_identifier">sh</span> <span class="ace_comment"># backwards compat</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">ENTRYPOINT</span> <span class="ace_paren ace_lparen">[</span><span class="ace_string">"docker-entrypoint.sh"</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">EXPOSE</span> <span class="ace_constant ace_numeric">3306</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_constant ace_language">CMD</span> <span class="ace_paren ace_lparen">[</span><span class="ace_string">"mysqld"</span><span class="ace_paren ace_rparen">]</span>
</div></div></div></div></div>
      <script>document.body.onkeyup = function(e) {
if (e.keyCode === 39) window.location.href = 'docker 4. registry.html';
if (e.keyCode === 37) window.location.href = 'docker 2.容器.html';
}</script>
    </body>
    </html>
  